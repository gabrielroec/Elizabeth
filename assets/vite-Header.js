import{r as a,j as e,c as g}from"./vite-client.js";const p=()=>{const[o,u]=a.useState([]),[l,d]=a.useState(!1),[n,m]=a.useState([]),[j,h]=a.useState(0);a.useEffect(()=>{const c=document.getElementById("header").getAttribute("data-menu");if(c)try{const r=JSON.parse(c);Array.isArray(r)?u(r):console.error("Parsed menu data is not an array")}catch(r){console.error("Error parsing menu data:",r)}else console.error("Menu items are empty or not defined")},[]),a.useEffect(()=>{l&&fetch("/cart.js").then(t=>t.json()).then(t=>{m(t.items),h(t.total_price)}).catch(t=>console.error("Error fetching cart data:",t))},[l]);const i=(t,c)=>{const r=n.find(s=>s.key===t);if(!r)return;const x=r.quantity+c;x<0||fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,quantity:x})}).then(s=>s.json()).then(s=>{m(s.items),h(s.total_price)}).catch(s=>console.error("Error updating cart:",s))},f=t=>{i(t,-n.find(c=>c.key===t).quantity)};return e.jsx(e.Fragment,{children:e.jsxs("header",{className:"site-header relative",children:[e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"header-content flex justify-between items-center py-4",children:[e.jsx("div",{className:"logo",children:e.jsx("a",{href:"/",children:e.jsx("img",{src:"/assets/logo-kidu.svg",alt:"Kidu Logo",width:"150",height:"auto"})})}),e.jsx("nav",{className:"main-menu",children:e.jsx("ul",{className:"flex space-x-6",children:o.length>0?o.map(t=>e.jsx("li",{children:e.jsx("a",{href:t.url,className:"text-lg hover:text-blue-600",children:t.title})},t.id)):e.jsx("li",{children:"Carregando..."})})}),e.jsxs("div",{className:"header-icons flex space-x-4 items-center",children:[e.jsx("a",{href:"/account",className:"text-lg hover:text-blue-600 flex items-center",children:e.jsx("img",{src:"/assets/user-svgrepo-com.svg",alt:"Account",className:"w-8"})}),e.jsxs("button",{onClick:()=>d(!0),className:"cart-toggle text-lg hover:text-blue-600 relative",children:[e.jsx("img",{src:"/assets/bag-svgrepo-com.svg",alt:"Cart",className:"w-8"}),e.jsx("span",{className:"cart-count absolute top-0 right-0 bg-red-500 text-white rounded-full text-xs px-2",children:n.length})]})]})]})}),e.jsxs("div",{className:`cart-drawer fixed right-0 top-0 w-1/2 h-full bg-white shadow-lg transition-transform transform z-50 ${l?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"cart-drawer-header p-4 flex justify-between items-center border-b",children:[e.jsx("h2",{className:"text-lg font-bold",children:"MY CART"}),e.jsx("button",{onClick:()=>d(!1),className:"cart-drawer-close text-2xl",children:"×"})]}),e.jsx("div",{className:"cart-drawer-body p-4",children:n.length>0?e.jsx("ul",{id:"cart-items",className:"cart-items-list",children:n.map(t=>e.jsxs("li",{className:"cart-item flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"cart-item-info",children:[e.jsx("p",{className:"text-sm",children:t.product_title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Quantidade:",e.jsx("button",{className:"decrease-qty",onClick:()=>i(t.key,-1),children:"-"}),e.jsx("span",{children:t.quantity}),e.jsx("button",{className:"increase-qty",onClick:()=>i(t.key,1),children:"+"})]}),e.jsx("button",{className:"remove-item text-red-500",onClick:()=>f(t.key),children:"Remover"})]}),e.jsx("div",{className:"cart-item-image",children:e.jsx("img",{src:t.image,alt:t.product_title,className:"w-16 h-16"})})]},t.key))}):e.jsx("p",{className:"text-center",children:"Seu carrinho está vazio."})}),e.jsxs("div",{className:"cart-drawer-footer mt-4 p-4",children:[e.jsxs("p",{className:"font-bold text-lg",children:["Total: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(j/100)]}),e.jsx("a",{href:"/cart",className:"btn btn-primary mt-4 block text-center",children:"Ver Carrinho"}),e.jsx("a",{href:"/checkout",className:"btn btn-secondary mt-2 block text-center",children:"Finalizar Compra"})]})]})]})})};g(document.getElementById("header")).render(e.jsx(a.StrictMode,{children:e.jsx(p,{})}));
